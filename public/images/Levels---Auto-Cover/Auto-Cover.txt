[[Category: Module|L]][[Category:Premium]][[Category: Levels|C]]
'''Automatic Cover Calculator''' ''(Levels - Automatic Cover Calculator in releases)'' is a submodule for [[Levels]]. It calculates a precise cover percentage for tokens and can display their cover value above tokens.

Options include defeated enemies as cover but at a reduced height and more. Preconfigured for dnd5e but works with all systems. Also adds the ability to duck!

== How to use ==
[[File:Acitem.png|thumb|Cover Item Location]]

=== Quick configuration (DND5E) ===

* After enabling the module import the cover item from the compendium
* In the Module Settings enable <code>Automatically Apply Active Effects</code>
* Drop some NPCs and Players onto the map
* Enter Combat
* Target a Creature

=== Why is the cover calculation not working? ===

* Make sure the combat is started and that you are targeting with the current turn creature.
* As a GM, Targeting from a Player's token will not calculate cover to avoid database update concurrency issues
* Make sure there is a wall or floor that provides cover
* You can test this easly by placing a wall that completely obstructs vision, then, disable vision on the token (so that it can see tokens beyond the wall) and try targeting (you should get 3\4 cover)
[[File:Autocovernocover.png|thumb|Ignore Cover Active Effect example]]

=== Ignoring Cover ===
If you have an actor for which you wish to ignore the cover active effect application, you can do so with an active effect on the actor or on the specific feature, the necessary flag to ignore cover is <code>flags.levelsautocover.noae</code> set the Mode to <code>Override</code> and Value to <code>1</code>

=== Custom Configuration and other settings ===
The Automatic Cover Calculator can be heavly customized, head to the module settings to see all the customization options.

All settings are described in details in the Settings hints.
[[File:Achudbtn.png|thumb|Ducking Button]]

== Ducking ==
Ducking will allow tokens to duck, changing their sight elevation and therefore beeing able to hide behind tables and the like.

To toggle ducking, simply click the button in the token HUD
[[File:MidiQol Settings.png|alt=Location to set the "Walls Block Ranged Attacks" and "Calculate Cover" settings|thumb|Location to set the "Walls Block Ranged Attacks" and "Calculate Cover" settings]]

== Midi-qol Integration ==
If you are using Midi-qol it's suggested that you let it take over cover handling, Automatic Cover Calculator will just act as a library module handling the math. To do so, simply enable these 2 settings in the Midi-qol configuration
